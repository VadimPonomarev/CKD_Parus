// create-team.js
const { PrismaClient } = require('@prisma/client');

const prisma = new PrismaClient();

async function createTeam() {
  try {
    console.log('üîÑ –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ...');

    // –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–ª–ª–µ–∫—Ç–∏–≤–æ–≤
    const count = await prisma.team.count();
    console.log(`üìä –¢–µ–∫—É—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–ª–ª–µ–∫—Ç–∏–≤–æ–≤: ${count}`);

    // –°–æ–∑–¥–∞–µ–º –∫–æ–ª–ª–µ–∫—Ç–∏–≤ "–õ—É–∏–∑–∞" —Å —è–≤–Ω—ã–º ID
    const teamData = {
      id: 'team_luiza_' + Date.now(), // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID
      name: '–û–±—Ä–∞–∑—Ü–æ–≤—ã–π —Ö–æ—Ä–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –∞–Ω—Å–∞–º–±–ª—å ¬´–õ—É–∏–∑–∞¬ª',
      slug: 'luiza',
      foundationDate: '1990 –≥.',
      titleAwardDate: '1995 –≥–æ–¥',
      lastConfirmation:
        '–ü—Ä–∏–∫–∞–∑ ‚Ññ 274 ‚Äì –û–î –ú–∏–Ω–∏—Å—Ç–µ—Ä—Å—Ç–≤–∞ –∫—É–ª—å—Ç—É—Ä—ã –ö–∞–ª–∏–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏ –æ—Ç 03.10.2022 –≥.',
      leaderName: '–ü–µ—Ç—Ä–æ–≤–∞ –ò—Ä–∏–Ω–∞ –í–∞–ª–µ—Ä—å–µ–≤–Ω–∞',
      leaderNameSecondary: '–ü–µ—Ç—Ä–æ–≤–∞ –Æ–ª–∏—è –ò–≥–æ—Ä–µ–≤–Ω–∞',
      participantsAge: '–¥–µ–≤—É—à–∫–∏ –≤ –≤–æ–∑—Ä–∞—Å—Ç–µ –æ—Ç 11 –¥–æ 18 –ª–µ—Ç',
      description: '–û–±—Ä–∞–∑—Ü–æ–≤—ã–π —Ö–æ—Ä–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –∞–Ω—Å–∞–º–±–ª—å ¬´–õ—É–∏–∑–∞¬ª',
      content: `–ê–Ω—Å–∞–º–±–ª—å ¬´–õ—É–∏–∑–∞¬ª ‚Äì –º–Ω–æ–≥–æ—á–∏—Å–ª–µ–Ω–Ω—ã–π –∏ —Å–ø–ª–æ—á–µ–Ω–Ω—ã–π –∫–æ–ª–ª–µ–∫—Ç–∏–≤ —Å –±–æ–ª—å—à–∏–º–∏ —Ç–≤–æ—Ä—á–µ—Å–∫–∏–º–∏ –ø–ª–∞–Ω–∞–º–∏ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏.

–°–æ—Å—Ç–∞–≤ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –æ–±—Ä–∞–∑—Ü–æ–≤–æ–≥–æ —Ö–æ—Ä–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω—Å–∞–º–±–ª—è ¬´–õ—É–∏–∑–∞¬ª ‚Äì –¥–µ–≤—É—à–∫–∏ –≤ –≤–æ–∑—Ä–∞—Å—Ç–µ –æ—Ç 11 –¥–æ 18 –ª–µ—Ç.

–£—á–∞—Å—Ç–Ω–∏–∫–∞–º –∞–Ω—Å–∞–º–±–ª—è –ø—Ä–µ–ø–æ–¥–∞–µ—Ç—Å—è: –æ—Å–Ω–æ–≤—ã –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–≥–æ —Ç–∞–Ω—Ü–∞, –Ω–∞—Ä–æ–¥–Ω–æ–≥–æ, —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –∏ —ç—Å—Ç—Ä–∞–¥–Ω–æ–≥–æ —Ç–∞–Ω—Ü–∞, –∞–∫—Ä–æ–±–∞—Ç–∏–∫–∞.

–û–±—Ä–∞–∑—Ü–æ–≤—ã–π —Ö–æ—Ä–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –∞–Ω—Å–∞–º–±–ª—å ¬´–õ—É–∏–∑–∞¬ª –æ–±–ª–∞–¥–∞–µ—Ç –≤—ã—Å–æ–∫–∏–º –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å—Å–∫–∏–º –º–∞—Å—Ç–µ—Ä—Å—Ç–≤–æ–º –∏ –ø–æ–ª—å–∑—É–µ—Ç—Å—è –∑–∞—Å–ª—É–∂–µ–Ω–Ω—ã–º –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç–æ–º –Ω–µ —Ç–æ–ª—å–∫–æ –≤ –≥–æ—Ä–æ–¥–µ, –æ–±–ª–∞—Å—Ç–∏, –Ω–æ –¥–∞–ª–µ–∫–æ –∑–∞ –µ–µ –ø—Ä–µ–¥–µ–ª–∞–º–∏.`,
      imageUrl: '/images/teams/luiza.jpg',
      category: '–•–æ—Ä–µ–æ–≥—Ä–∞—Ñ–∏—è',
      isActive: true,
    };

    console.log('\n‚ûï –°–æ–∑–¥–∞–µ–º –∫–æ–ª–ª–µ–∫—Ç–∏–≤...');

    const team = await prisma.team.create({
      data: teamData,
    });

    console.log('‚úÖ –ö–û–õ–õ–ï–ö–¢–ò–í –£–°–ü–ï–®–ù–û –°–û–ó–î–ê–ù!');
    console.log('='.repeat(50));
    console.log(`ID: ${team.id}`);
    console.log(`–ù–∞–∑–≤–∞–Ω–∏–µ: ${team.name}`);
    console.log(`Slug: ${team.slug}`);
    console.log(`–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è: ${team.createdAt}`);
    console.log(`\nüîó –°—Å—ã–ª–∫–∞ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞:`);
    console.log(`http://localhost:3000/teams/${team.id}`);
    console.log('='.repeat(50));

    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Å–µ –∫–æ–ª–ª–µ–∫—Ç–∏–≤—ã
    const allTeams = await prisma.team.findMany();
    console.log(`\nüìã –í—Å–µ–≥–æ –∫–æ–ª–ª–µ–∫—Ç–∏–≤–æ–≤ –≤ –±–∞–∑–µ: ${allTeams.length}`);
  } catch (error) {
    console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–ª–ª–µ–∫—Ç–∏–≤–∞:', error.message);

    // –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ - –ø–æ–∫–∞–∂–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ
    if (error.code === 'P2002') {
      console.log('\n‚ö†Ô∏è –ö–æ–ª–ª–µ–∫—Ç–∏–≤ —Å —Ç–∞–∫–∏–º slug —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç');
      const existing = await prisma.team.findUnique({
        where: { slug: 'luiza' },
      });
      if (existing) {
        console.log(`\nüìå –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–ª–ª–µ–∫—Ç–∏–≤:`);
        console.log(`ID: ${existing.id}`);
        console.log(`–ù–∞–∑–≤–∞–Ω–∏–µ: ${existing.name}`);
        console.log(`–°—Å—ã–ª–∫–∞: http://localhost:3000/teams/${existing.id}`);
      }
    }
  } finally {
    await prisma.$disconnect();
  }
}

createTeam();
